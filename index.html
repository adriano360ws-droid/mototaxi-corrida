<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Comprovante de Corrida ‚Äî Moto T√°xi Adriano</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f0f0f">

<style>
:root{
  --bg:#0f0f0f;--card:#1a1a1a;--muted:#bbb;--accent:#19c23b;--text:#fff
}
body{background:var(--bg);color:var(--text);font-family:Arial;margin:0;padding:18px}
.wrap{max-width:820px;margin:auto}
h1{font-size:20px}
label{display:block;color:var(--muted);margin-top:12px}
input,select{width:100%;padding:12px;border-radius:10px;border:none;background:#141414;color:#fff}
.btn{padding:12px;border-radius:12px;border:none;font-weight:bold}
.btn-green{background:var(--accent);color:#fff}
.result{font-size:56px;color:#00ff66;text-align:center;margin:20px 0}
.card{background:var(--card);padding:16px;border-radius:14px;margin-top:12px}
.small{font-size:13px;white-space:pre-line}
.qrwrap{background:#fff;padding:12px;border-radius:14px;width:320px;height:320px;margin:auto}
.qrimg{width:100%}
footer{text-align:center;color:#bbb;font-size:13px;margin-top:20px}
</style>
</head>

<body>
<div class="wrap">

<h1>Comprovante de Corrida ‚Äî Moto T√°xi Adriano</h1>

<div class="card">
<b>Adriano Alves de Oliveira Souza</b><br>
üìû 86981291332<br>
üèçÔ∏è Honda CG 125 Fan ‚Äî Preta ‚Ä¢ Placa QRP5G89<br>
PIX: <b>+5586981291332</b>
</div>

<label>Tipo de tarifa</label>
<select id="tarifaTipo">
<option value="dia">Tarifa Dia ‚Äî R$ 3,00 / km R$ 1,50</option>
<option value="noite">Tarifa Noite ‚Äî R$ 3,00 / km R$ 1,60</option>
</select>

<label>Destino</label>
<input id="destino">

<label>Dist√¢ncia (KM)</label>
<input id="km">

<button class="btn btn-green" onclick="calcular()">Calcular & Gerar</button>

<div id="resultado" class="result">R$ 0,00</div>
<div id="detalhes" class="card small"></div>

<h3 style="text-align:center">PIX (valor autom√°tico)</h3>
<div class="qrwrap"><img id="qrImg" class="qrimg"></div>

<div class="card small">
<h3>Hist√≥rico de Corridas</h3>
<div id="hist"></div>
<button onclick="limparHistorico()">Limpar hist√≥rico</button>
</div>

<button class="btn btn-green" onclick="compartilhar()">üì≤ Enviar WhatsApp</button>

<footer>Gerado por Moto T√°xi Adriano</footer>
</div>

<script>
const HIST_KEY="moto_taxi_hist_v2"; // <- for√ßa reset antigo

const TARIFAS={
dia:{nome:"Tarifa Dia (Bandeira Verde)",base:3,km:1.5,min:6},
noite:{nome:"Tarifa Noite (Bandeira Vermelha)",base:3,km:1.6,min:7}
};

function arred10(v){return Math.ceil(v*10)/10}

function gerarPIX(v){
qrImg.src="https://api.qrserver.com/v1/create-qr-code/?size=600x600&data="+encodeURIComponent("PIX-"+v)
}

function calcular(){
if(!destino.value)return alert("Informe o destino");
const t=TARIFAS[tarifaTipo.value];
const kmv=parseFloat(km.value.replace(",","."))||0;
const data=new Date().toLocaleString("pt-BR");
const total=kmv>0&&kmv<=0.9?t.min:arred10(t.base+kmv*t.km);

const visor=
`Destino: ${destino.value}
Data: ${data}

${t.nome}
Bandeira: R$ ${t.base.toFixed(2)}
Dist√¢ncia: ${kmv.toFixed(2)} km √ó R$ ${t.km.toFixed(2)}
Total final: R$ ${total.toFixed(2)}

Moto: Honda CG 125 Fan
Placa: QRP5G89`;

const recibo = `üßæ RECIBO DIGITAL ‚Äî MOTO T√ÅXI ADRIANO

Destino: ${destino.value}
Data e hora: ${data}

Tarifa aplicada:
${t.nome}

Valor final: R$ ${total.toFixed(2)}

Moto: Honda CG 125 Fan
Cor: Preta
Placa: QRP5G89

üí≥ Pagamento via PIX recebido

üôè Obrigado pela confian√ßa!
Seguran√ßa e profissionalismo em cada corrida.`;

resultado.innerText="R$ "+total.toFixed(2);
detalhes.innerText=visor;
gerarPIX(total);

const h=JSON.parse(localStorage.getItem(HIST_KEY)||"[]");
h.unshift({valor:total,recibo});
localStorage.setItem(HIST_KEY,JSON.stringify(h));
renderHist();
}

function renderHist(){
const h=JSON.parse(localStorage.getItem(HIST_KEY)||"[]");
hist.innerHTML=h.map(i=>`<div class="card small">${i.recibo}</div>`).join("");
}

function limparHistorico(){
localStorage.removeItem(HIST_KEY);renderHist();
}

function compartilhar(){
const h=JSON.parse(localStorage.getItem(HIST_KEY)||"[]")[0];
if(h)window.open("https://api.whatsapp.com/send?text="+encodeURIComponent(h.recibo));
}

renderHist();
</script>
</body>
</html>
